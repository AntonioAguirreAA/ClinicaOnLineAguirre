<div *ngIf="isAdmin; else noAccess">
  <h2 style="color: white">GESTIÓN DE USUARIOS</h2>

  <!-- ­──────── CARDS ──────── -->
  <div class="card-container">
    <div
      *ngFor="let usuario of usuarios"
      class="card"
      appHoverEffect
      [hoverColor]="'#f0f0f0'"
      [hoverTextColor]="'#2c3e50'"
      [hoverTransform]="'scale(1.05)'"
      [appHighlightUserType]="usuario.tipo_usuario"
    >
      <img
        [src]="usuario.img_url_1 || 'assets/imagen-por-defecto.png'"
        [alt]="'Imagen de ' + usuario.nombre"
        class="card-img"
      />

      <div class="card-body">
        <h4>
          {{
            usuario.nombre
              | especialistaNombre : usuario.apellido : usuario.tipo_usuario
          }}
        </h4>

        <p *ngIf="usuario.email">
          Email:
          <span class="tooltip-container">
            {{ usuario.email }}
            <span class="tooltip-text">{{ usuario.email }}</span>
          </span>
        </p>

        <p>Tipo de Usuario: {{ usuario.tipo_usuario }}</p>

        <!-- ­── Botones según rol ── -->
        <div class="card-actions">
          <!-- ­Paciente 
          <button
            *ngIf="usuario.tipo_usuario === 'paciente'"
            (click)="mostrarHistoriaClinica(usuario)"
          >
            {{ pacienteSeleccionado?.id === usuario.id ? "Ocultar" : "Ver" }}
            Historia Clínica
          </button>

          <button
            *ngIf="usuario.tipo_usuario === 'paciente'"
            (click)="descargarTurnos(usuario)"
          >
            Descargar Turnos
          </button>
-->
          <!-- ­Especialista -->
          <button
            *ngIf="usuario.tipo_usuario === 'especialista' && usuario.aprobado"
            (click)="inhabilitarEspecialista(usuario)"
          >
            Inhabilitar
          </button>
          <button
            *ngIf="usuario.tipo_usuario === 'especialista' && !usuario.aprobado"
            (click)="habilitarEspecialista(usuario)"
          >
            Habilitar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ­──────── FORMULARIO CREAR USUARIO ──────── 
  <div class="register-container">
    <form [formGroup]="registroForm" (ngSubmit)="crearUsuario()">
      <h2>Crear Nuevo Usuario</h2>

      <label>Tipo de usuario</label>
      <div class="tipo-usuario-buttons">
        <button
          type="button"
          (click)="setTipoUsuario('paciente')"
          [class.selected]="tipoUsuario === 'paciente'"
        >
          Paciente
        </button>
        <button
          type="button"
          (click)="setTipoUsuario('especialista')"
          [class.selected]="tipoUsuario === 'especialista'"
        >
          Especialista
        </button>
        <button
          type="button"
          (click)="setTipoUsuario('administrador')"
          [class.selected]="tipoUsuario === 'administrador'"
        >
          Administrador
        </button>
      </div>

      <label>Nombre:</label>
      <input type="text" formControlName="nombre" />
      <label>Apellido:</label>
      <input type="text" formControlName="apellido" />
      <label>Edad:</label>
      <input type="number" formControlName="edad" />
      <label>DNI:</label>
      <input type="text" formControlName="dni" />

      <div *ngIf="tipoUsuario === 'paciente'">
        <label>Obra Social:</label>
        <input type="text" formControlName="obraSocial" />
      </div>

      <div *ngIf="tipoUsuario === 'especialista'">
        <label>Especialidad:</label>
        <select formControlName="especialidad">
          <option *ngFor="let esp of especialidades" [value]="esp.id">
            {{ esp.nombre }}
          </option>
        </select>
      </div>

      <label>Email:</label>
      <input type="email" formControlName="email" />
      <label>Contraseña:</label>
      <input type="password" formControlName="password" />
      <label>Imagen de perfil:</label>
      <input type="file" (change)="seleccionarImagen($event)" />

      <button type="submit" [disabled]="registroForm.invalid">
        Crear Usuario
      </button>
    </form>
  </div>
  -->
</div>

<ng-template #noAccess>
  <p>No tienes permiso para acceder a esta sección.</p>
</ng-template>
